{"ast":null,"code":"import _slicedToArray from\"/Users/seokhyunkim/Desktop/projects/fake_reddit/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import axios from\"axios\";import{Button}from\"reactstrap\";import Reply from\"./Reply\";var Comment=function Comment(_ref){var commentID=_ref.commentID,username=_ref.username,createdAt=_ref.createdAt,content=_ref.content,points=_ref.points,postID=_ref.postID;var _useState=useState(points),_useState2=_slicedToArray(_useState,2),newUpVote=_useState2[0],setUpVote=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),upVoteClicked=_useState4[0],setUpVoteClicked=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showReply=_useState6[0],setShowReply=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),replyContent=_useState8[0],setReplyContent=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),replyList=_useState10[0],setReplyList=_useState10[1];useEffect(function(){var getReply=function getReply(){axios.get(\"/api/get_reply\",{params:{commentID:commentID,postID:postID}}).then(function(res){return res.data;}).then(function(data){console.log(data);setReplyList(data.replies);}).catch(function(err){return console.log(err);});};getReply();},[]);var upVoteComment=function upVoteComment(isUpVote){axios.patch(\"/api/posts/upvote/comment\",{isUpVote:isUpVote,commentID:commentID}).then(function(res){return res.data;}).then(function(data){return console.log(data.message);});};var postReply=function postReply(e){e.preventDefault();axios.post(\"/api/post_reply\",{parentID:commentID,username:localStorage.getItem(\"username\"),content:replyContent,postID:postID}).then(window.location.reload()).catch(function(err){return console.log(err);});};return/*#__PURE__*/React.createElement(\"div\",{className:\"cmt-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"cmt\"},/*#__PURE__*/React.createElement(\"div\",{className:\"comment-vote-bar\"},/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){if(!upVoteClicked){setUpVote(points+1);setUpVoteClicked(true);upVoteComment(true);}else{setUpVote(points);setUpVoteClicked(false);upVoteComment(false);}},className:\"comment-vote-button\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-arrow-up\"})),/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){if(!upVoteClicked){if(points>0){setUpVote(points-1);setUpVoteClicked(true);upVoteComment(false);}}else{setUpVote(points);setUpVoteClicked(false);upVoteComment(true);}},className:\"comment-vote-button\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-arrow-down\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"comment-contents\"},/*#__PURE__*/React.createElement(\"p\",{className:\"posted-by\"},username,\" \",newUpVote,\" points \",/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-circle\"}),createdAt),/*#__PURE__*/React.createElement(\"p\",{className:\"comment-text\"},content),localStorage.getItem(\"username\")?/*#__PURE__*/React.createElement(\"div\",{className:\"comment-reply\"},/*#__PURE__*/React.createElement(\"button\",{id:\"reply-button\",type:\"button\",onClick:function onClick(){return setShowReply(!showReply);}},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-comment\"}),\"Reply\")):/*#__PURE__*/React.createElement(\"div\",null))),showReply?/*#__PURE__*/React.createElement(\"div\",{className:\"comment-box-container\"},/*#__PURE__*/React.createElement(\"form\",{method:\"POST\",onSubmit:postReply},/*#__PURE__*/React.createElement(\"div\",{className:\"reply\"},/*#__PURE__*/React.createElement(\"div\",{className:\"vertical-line\"}),/*#__PURE__*/React.createElement(\"textarea\",{className:\"comment-box\",name:\"\",id:\"\",cols:\"30\",rows:\"10\",placeholder:\"What are your thoughts?\",onChange:function onChange(e){setReplyContent(e.target.value);}})),/*#__PURE__*/React.createElement(\"div\",{id:\"cmt-btn-container\"},/*#__PURE__*/React.createElement(Button,{type:\"submit\",color:\"primary\",id:\"comment-btn\",disabled:!replyContent},\"COMMENT\")))):/*#__PURE__*/React.createElement(\"div\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"replies\"},replyList&&replyList.map(function(reply){return/*#__PURE__*/React.createElement(Reply,{key:reply.commentID,commentID:reply.commentID,username:reply.username,createdAt:reply.createdAt,content:reply.content,points:reply.points});})));};export default Comment;","map":{"version":3,"sources":["/Users/seokhyunkim/Desktop/projects/fake_reddit/client/src/components/post/Comment.js"],"names":["React","useState","useEffect","axios","Button","Reply","Comment","commentID","username","createdAt","content","points","postID","newUpVote","setUpVote","upVoteClicked","setUpVoteClicked","showReply","setShowReply","replyContent","setReplyContent","replyList","setReplyList","getReply","get","params","then","res","data","console","log","replies","catch","err","upVoteComment","isUpVote","patch","message","postReply","e","preventDefault","post","parentID","localStorage","getItem","window","location","reload","target","value","map","reply"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { Button } from \"reactstrap\";\nimport Reply from \"./Reply\";\n\nconst Comment = ({\n  commentID,\n  username,\n  createdAt,\n  content,\n  points,\n  postID,\n}) => {\n  const [newUpVote, setUpVote] = useState(points);\n  const [upVoteClicked, setUpVoteClicked] = useState(false);\n  const [showReply, setShowReply] = useState(false);\n  const [replyContent, setReplyContent] = useState(\"\");\n  const [replyList, setReplyList] = useState([]);\n\n  useEffect(() => {\n    const getReply = () => {\n      axios\n        .get(\"/api/get_reply\", {\n          params: { commentID: commentID, postID: postID },\n        })\n        .then((res) => res.data)\n        .then((data) => {\n          console.log(data);\n          setReplyList(data.replies);\n        })\n        .catch((err) => console.log(err));\n    };\n    getReply();\n  }, []);\n\n  const upVoteComment = (isUpVote) => {\n    axios\n      .patch(\"/api/posts/upvote/comment\", {\n        isUpVote: isUpVote,\n        commentID: commentID,\n      })\n      .then((res) => res.data)\n      .then((data) => console.log(data.message));\n  };\n\n  const postReply = (e) => {\n    e.preventDefault();\n    axios\n      .post(\"/api/post_reply\", {\n        parentID: commentID,\n        username: localStorage.getItem(\"username\"),\n        content: replyContent,\n        postID: postID,\n      })\n      .then(window.location.reload())\n      .catch((err) => console.log(err));\n  };\n\n  return (\n    <div className=\"cmt-container\">\n      <div className=\"cmt\">\n        <div className=\"comment-vote-bar\">\n          <button\n            onClick={() => {\n              if (!upVoteClicked) {\n                setUpVote(points + 1);\n                setUpVoteClicked(true);\n                upVoteComment(true);\n              } else {\n                setUpVote(points);\n                setUpVoteClicked(false);\n                upVoteComment(false);\n              }\n            }}\n            className=\"comment-vote-button\"\n          >\n            <i className=\"fas fa-arrow-up\"></i>\n          </button>\n          <button\n            onClick={() => {\n              if (!upVoteClicked) {\n                if (points > 0) {\n                  setUpVote(points - 1);\n                  setUpVoteClicked(true);\n                  upVoteComment(false);\n                }\n              } else {\n                setUpVote(points);\n                setUpVoteClicked(false);\n                upVoteComment(true);\n              }\n            }}\n            className=\"comment-vote-button\"\n          >\n            <i className=\"fas fa-arrow-down\"></i>\n          </button>\n        </div>\n        <div className=\"comment-contents\">\n          <p className=\"posted-by\">\n            {username} {newUpVote} points <i className=\"fas fa-circle\"></i>\n            {createdAt}\n          </p>\n          <p className=\"comment-text\">{content}</p>\n\n          {/* Show reply button if user is logged in */}\n\n          {localStorage.getItem(\"username\") ? (\n            <div className=\"comment-reply\">\n              <button\n                id=\"reply-button\"\n                type=\"button\"\n                onClick={() => setShowReply(!showReply)}\n              >\n                <i className=\"fas fa-comment\"></i>\n                Reply\n              </button>\n            </div>\n          ) : (\n            <div></div>\n          )}\n        </div>\n      </div>\n\n      {/* Reply box appears when the Reply button is clicked */}\n\n      {showReply ? (\n        <div className=\"comment-box-container\">\n          <form method=\"POST\" onSubmit={postReply}>\n            <div className=\"reply\">\n              <div className=\"vertical-line\"></div>\n              <textarea\n                className=\"comment-box\"\n                name=\"\"\n                id=\"\"\n                cols=\"30\"\n                rows=\"10\"\n                placeholder=\"What are your thoughts?\"\n                onChange={(e) => {\n                  setReplyContent(e.target.value);\n                }}\n              ></textarea>\n            </div>\n            <div id=\"cmt-btn-container\">\n              <Button\n                type=\"submit\"\n                color=\"primary\"\n                id=\"comment-btn\"\n                disabled={!replyContent}\n              >\n                COMMENT\n              </Button>\n            </div>\n          </form>\n        </div>\n      ) : (\n        <div></div>\n      )}\n\n      {/* Display replies */}\n\n      <div className=\"replies\">\n        {replyList &&\n          replyList.map((reply) => {\n            return (\n              <Reply\n                key={reply.commentID}\n                commentID={reply.commentID}\n                username={reply.username}\n                createdAt={reply.createdAt}\n                content={reply.content}\n                points={reply.points}\n              />\n            );\n          })}\n      </div>\n    </div>\n  );\n};\n\nexport default Comment;\n"]},"metadata":{},"sourceType":"module"}