{"ast":null,"code":"import _defineProperty from\"/Users/seokhyunkim/Desktop/projects/fake_reddit/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/seokhyunkim/Desktop/projects/fake_reddit/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/seokhyunkim/Desktop/projects/fake_reddit/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import axios from\"axios\";import\"../../App.scss\";import{Button,Modal,ModalHeader,ModalBody}from\"reactstrap\";import GoogleLogin from\"react-google-login\";import{emailCheck}from\"../../utilFunctions\";var SignupModal=function SignupModal(_ref){var updateToken=_ref.updateToken,signModalToggle=_ref.signModalToggle,signModal=_ref.signModal;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),username=_useState4[0],setUsername=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),password1=_useState6[0],setPassword1=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),password2=_useState8[0],setPassword2=_useState8[1];var _useState9=useState({username_error:\"\",email_error:\"\",password1_error:\"\",password2_error:\"\"}),_useState10=_slicedToArray(_useState9,2),errors=_useState10[0],setErrors=_useState10[1];var handleSubmit=function handleSubmit(e){var isValid=formValidate();e.preventDefault();if(isValid){axios.post(\"/api/signup\",{email:email,username:username,password:password1}).then(function(res){return res.data;}).then(function(data){if(\"error_message\"in data){setErrors(function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},\"password2_error\",data.error_message));});}else{signModalToggle();alert(\"Successfully signed up\\nPlease Log in\");console.log(\"New User: \"+username);}}).catch(function(err){signModalToggle();alert(\"Sign up failed. Please try again later\");console.log(err);});}};var formValidate=function formValidate(){var isValid=true;setErrors({});if(!email){setErrors(function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},\"email_error\",\"Empty Email\"));});isValid=false;}else if(!emailCheck(email)){setErrors(function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},\"email_error\",\"Email Not Valid\"));});isValid=false;}if(!username){setErrors(function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},\"username_error\",\"Empty Username\"));});isValid=false;}else if(username.length<=4||username.length>=21){setErrors(function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},\"username_error\",\"The length of username should be between 5 and 20.\"));});isValid=false;}if(!password1){setErrors(function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},\"password1_error\",\"Empty Password\"));});isValid=false;}if(!password2){setErrors(function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},\"password2_error\",\"Empty Password\"));});isValid=false;}else if(password1!==password2){setErrors(function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},\"password2_error\",\"Password Not Matched\"));});isValid=false;}return isValid;};var googleOnSuccess=function googleOnSuccess(res){console.log(res);var userEmail=res.profileObj.email;var parsed_username=userEmail.substring(0,userEmail.indexOf(\"@\"));localStorage.setItem(\"userToken\",res.tokenObj.access_token);localStorage.setItem(\"username\",parsed_username);updateToken();alert(\"Logged In Successfully\");};var googleOnFailure=function googleOnFailure(res){console.log(res);};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Modal,{className:\"auth-modal\",isOpen:signModal,toggle:signModalToggle},/*#__PURE__*/React.createElement(ModalHeader,{className:\"modal-header\",toggle:signModalToggle},\"Sign up\"),/*#__PURE__*/React.createElement(ModalBody,{className:\"modal-body\"},/*#__PURE__*/React.createElement(GoogleLogin,{clientId:\"1087910724182-02v9tf6jm6h867i3vd81rui2dm4b6jvb.apps.googleusercontent.com\",render:function render(renderProps){return/*#__PURE__*/React.createElement(Button,{onClick:renderProps.onClick,disabled:renderProps.disabled,color:\"link\",className:\"google-button\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fab fa-google\"}),\"CONTINUE WITH GOOGLE\");},onSuccess:googleOnSuccess,onFailure:googleOnFailure,cookiePolicy:\"single_host_origin\"}),/*#__PURE__*/React.createElement(\"form\",{method:\"POST\",onSubmit:handleSubmit,noValidate:true},/*#__PURE__*/React.createElement(\"div\",{className:\"input-buttons-wrapper\"},/*#__PURE__*/React.createElement(\"input\",{type:\"email\",name:\"email\",placeholder:\"EMAIL\",onChange:function onChange(e){return setEmail(e.target.value);},required:true}),/*#__PURE__*/React.createElement(\"div\",{className:\"error-message\"},errors[\"email_error\"]),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"username\",placeholder:\"USERNAME\",onChange:function onChange(e){return setUsername(e.target.value);},required:true}),/*#__PURE__*/React.createElement(\"div\",{className:\"error-message\"},errors[\"username_error\"]),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",name:\"password1\",placeholder:\"PASSWORD\",onChange:function onChange(e){return setPassword1(e.target.value);},required:true}),/*#__PURE__*/React.createElement(\"div\",{className:\"error-message\"},errors[\"password1_error\"]),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",name:\"password2\",placeholder:\"CONFIRM PASSWORD\",onChange:function onChange(e){return setPassword2(e.target.value);},required:true}),/*#__PURE__*/React.createElement(\"div\",{className:\"error-message\"},errors[\"password2_error\"])),/*#__PURE__*/React.createElement(Button,{type:\"submit\",className:\"modal-signup-button\",color:\"primary\"},\"SIGN UP\")))));};export default SignupModal;","map":{"version":3,"sources":["/Users/seokhyunkim/Desktop/projects/fake_reddit/client/src/components/navbar/SignupModal.js"],"names":["React","useState","axios","Button","Modal","ModalHeader","ModalBody","GoogleLogin","emailCheck","SignupModal","updateToken","signModalToggle","signModal","email","setEmail","username","setUsername","password1","setPassword1","password2","setPassword2","username_error","email_error","password1_error","password2_error","errors","setErrors","handleSubmit","e","isValid","formValidate","preventDefault","post","password","then","res","data","prev","error_message","alert","console","log","catch","err","length","googleOnSuccess","userEmail","profileObj","parsed_username","substring","indexOf","localStorage","setItem","tokenObj","access_token","googleOnFailure","renderProps","onClick","disabled","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport axios from \"axios\";\nimport \"../../App.scss\";\nimport { Button, Modal, ModalHeader, ModalBody } from \"reactstrap\";\nimport GoogleLogin from \"react-google-login\";\nimport { emailCheck } from \"../../utilFunctions\";\n\nconst SignupModal = ({ updateToken, signModalToggle, signModal }) => {\n  const [email, setEmail] = useState(\"\");\n  const [username, setUsername] = useState(\"\");\n  const [password1, setPassword1] = useState(\"\");\n  const [password2, setPassword2] = useState(\"\");\n  const [errors, setErrors] = useState({\n    username_error: \"\",\n    email_error: \"\",\n    password1_error: \"\",\n    password2_error: \"\",\n  });\n\n  const handleSubmit = (e) => {\n    const isValid = formValidate();\n    e.preventDefault();\n\n    if (isValid) {\n      axios\n        .post(\"/api/signup\", {\n          email: email,\n          username: username,\n          password: password1,\n        })\n        .then((res) => res.data)\n        .then((data) => {\n          if (\"error_message\" in data) {\n            setErrors((prev) => ({\n              ...prev,\n              [\"password2_error\"]: data.error_message,\n            }));\n          } else {\n            signModalToggle();\n            alert(\"Successfully signed up\\nPlease Log in\");\n            console.log(\"New User: \" + username);\n          }\n        })\n        .catch((err) => {\n          signModalToggle();\n          alert(\"Sign up failed. Please try again later\");\n          console.log(err);\n        });\n    }\n  };\n\n  const formValidate = () => {\n    let isValid = true;\n    setErrors({});\n\n    if (!email) {\n      setErrors((prev) => ({ ...prev, [\"email_error\"]: \"Empty Email\" }));\n      isValid = false;\n    } else if (!emailCheck(email)) {\n      setErrors((prev) => ({ ...prev, [\"email_error\"]: \"Email Not Valid\" }));\n      isValid = false;\n    }\n\n    if (!username) {\n      setErrors((prev) => ({\n        ...prev,\n        [\"username_error\"]: \"Empty Username\",\n      }));\n      isValid = false;\n    } else if (username.length <= 4 || username.length >= 21) {\n      setErrors((prev) => ({\n        ...prev,\n        [\"username_error\"]:\n          \"The length of username should be between 5 and 20.\",\n      }));\n      isValid = false;\n    }\n\n    if (!password1) {\n      setErrors((prev) => ({\n        ...prev,\n        [\"password1_error\"]: \"Empty Password\",\n      }));\n      isValid = false;\n    }\n\n    if (!password2) {\n      setErrors((prev) => ({\n        ...prev,\n        [\"password2_error\"]: \"Empty Password\",\n      }));\n      isValid = false;\n    } else if (password1 !== password2) {\n      setErrors((prev) => ({\n        ...prev,\n        [\"password2_error\"]: \"Password Not Matched\",\n      }));\n      isValid = false;\n    }\n\n    return isValid;\n  };\n\n  const googleOnSuccess = (res) => {\n    console.log(res);\n    const userEmail = res.profileObj.email;\n    const parsed_username = userEmail.substring(0, userEmail.indexOf(\"@\"));\n    localStorage.setItem(\"userToken\", res.tokenObj.access_token);\n    localStorage.setItem(\"username\", parsed_username);\n    updateToken();\n    alert(\"Logged In Successfully\");\n  };\n\n  const googleOnFailure = (res) => {\n    console.log(res);\n  };\n\n  return (\n    <div>\n      <Modal className=\"auth-modal\" isOpen={signModal} toggle={signModalToggle}>\n        <ModalHeader className=\"modal-header\" toggle={signModalToggle}>\n          Sign up\n        </ModalHeader>\n        <ModalBody className=\"modal-body\">\n          <GoogleLogin\n            clientId=\"1087910724182-02v9tf6jm6h867i3vd81rui2dm4b6jvb.apps.googleusercontent.com\"\n            render={(renderProps) => (\n              <Button\n                onClick={renderProps.onClick}\n                disabled={renderProps.disabled}\n                color=\"link\"\n                className=\"google-button\"\n              >\n                <i className=\"fab fa-google\"></i>\n                CONTINUE WITH GOOGLE\n              </Button>\n            )}\n            onSuccess={googleOnSuccess}\n            onFailure={googleOnFailure}\n            cookiePolicy={\"single_host_origin\"}\n          />\n          <form method=\"POST\" onSubmit={handleSubmit} noValidate>\n            <div className=\"input-buttons-wrapper\">\n              <input\n                type=\"email\"\n                name=\"email\"\n                placeholder=\"EMAIL\"\n                onChange={(e) => setEmail(e.target.value)}\n                required\n              />\n              <div className=\"error-message\">{errors[\"email_error\"]}</div>\n              <input\n                type=\"text\"\n                name=\"username\"\n                placeholder=\"USERNAME\"\n                onChange={(e) => setUsername(e.target.value)}\n                required\n              />\n              <div className=\"error-message\">{errors[\"username_error\"]}</div>\n              <input\n                type=\"password\"\n                name=\"password1\"\n                placeholder=\"PASSWORD\"\n                onChange={(e) => setPassword1(e.target.value)}\n                required\n              />\n              <div className=\"error-message\">{errors[\"password1_error\"]}</div>\n              <input\n                type=\"password\"\n                name=\"password2\"\n                placeholder=\"CONFIRM PASSWORD\"\n                onChange={(e) => setPassword2(e.target.value)}\n                required\n              />\n              <div className=\"error-message\">{errors[\"password2_error\"]}</div>\n            </div>\n            <Button\n              type=\"submit\"\n              className=\"modal-signup-button\"\n              color=\"primary\"\n            >\n              SIGN UP\n            </Button>\n          </form>\n        </ModalBody>\n      </Modal>\n    </div>\n  );\n};\n\nexport default SignupModal;\n"]},"metadata":{},"sourceType":"module"}